{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _get from \"lodash/get\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqualArray from '../utils/shallowEqualArray';\nimport { polyfill } from 'react-lifecycles-compat';\nimport DropdownMenu, { dropdownMenuPropTypes } from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport createUtils from './utils';\nimport { flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport getSafeRegExpString from '../utils/getSafeRegExpString';\nimport { PickerToggle, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, getToggleWrapperClassName, createConcatChildrenFunction } from '../Picker';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes';\nvar MultiCascader = /*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(MultiCascader, _React$Component);\n  function MultiCascader(props) {\n    var _this;\n    _this = _React$Component.call(this, props) || this;\n    _this.isControlled = null;\n    _this.menuContainerRef = void 0;\n    _this.positionRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n    _this.handleCheck = function (item, event, checked) {\n      var _this$props = _this.props,\n        valueKey = _this$props.valueKey,\n        cascade = _this$props.cascade,\n        uncheckableItemValues = _this$props.uncheckableItemValues,\n        onChange = _this$props.onChange,\n        onCheck = _this$props.onCheck;\n      var itemValue = item[valueKey];\n      var value = [];\n      if (cascade) {\n        value = MultiCascader.utils.splitValue(item, checked, _this.getValue(), uncheckableItemValues).value;\n      } else {\n        value = _this.getValue();\n        if (checked) {\n          value.push(itemValue);\n        } else {\n          value = value.filter(function (n) {\n            return n !== itemValue;\n          });\n        }\n      }\n      if (!_this.isControlled) {\n        _this.setState({\n          value: value\n        });\n      }\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n      onCheck === null || onCheck === void 0 ? void 0 : onCheck(value, item, checked, event);\n    };\n    _this.handleChangeForSearchItem = function (value, checked, event) {\n      _this.handleCheck(value, event, checked);\n    };\n    _this.handleSelect = function (node, cascadeItems, activePaths, event) {\n      var _this$props2 = _this.props,\n        onSelect = _this$props2.onSelect,\n        valueKey = _this$props2.valueKey,\n        childrenKey = _this$props2.childrenKey;\n      _this.setState({\n        selectNode: node,\n        items: cascadeItems,\n        activePaths: activePaths\n      }, function () {\n        var _this$positionRef$cur, _this$positionRef$cur2;\n        (_this$positionRef$cur = _this.positionRef.current) === null || _this$positionRef$cur === void 0 ? void 0 : (_this$positionRef$cur2 = _this$positionRef$cur.updatePosition) === null || _this$positionRef$cur2 === void 0 ? void 0 : _this$positionRef$cur2.call(_this$positionRef$cur);\n      });\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, activePaths, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }), event);\n    };\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props$onSearch, _this$props3;\n      _this.setState({\n        searchKeyword: searchKeyword\n      });\n      (_this$props$onSearch = (_this$props3 = _this.props).onSearch) === null || _this$props$onSearch === void 0 ? void 0 : _this$props$onSearch.call(_this$props3, searchKeyword, event);\n    };\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n    _this.handleClean = function (event) {\n      var _this$props4 = _this.props,\n        disabled = _this$props4.disabled,\n        onChange = _this$props4.onChange,\n        data = _this$props4.data;\n      if (disabled) {\n        return;\n      }\n      var nextState = {\n        items: [data],\n        selectNode: null,\n        activePaths: []\n      };\n      if (!_this.isControlled) {\n        nextState.value = [];\n      }\n      _this.setState(nextState);\n      onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n    };\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props5;\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n      _this.setState({\n        active: true\n      });\n    };\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props6;\n      (_this$props$onClose = (_this$props6 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props6);\n      _this.setState({\n        searchKeyword: '',\n        active: false\n      });\n    };\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n    _this.renderSearchRow = function (item, key) {\n      var _extends2, _classNames;\n      var _this$props7 = _this.props,\n        labelKey = _this$props7.labelKey,\n        valueKey = _this$props7.valueKey,\n        cascade = _this$props7.cascade,\n        _this$props7$disabled = _this$props7.disabledItemValues,\n        disabledItemValues = _this$props7$disabled === void 0 ? [] : _this$props7$disabled;\n      var searchKeyword = _this.state.searchKeyword;\n      var values = _this.getValue();\n      var nodes = getNodeParents(item);\n      var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n      var labelElements = [];\n      var a = item[labelKey].split(regx);\n      var b = item[labelKey].match(regx);\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n        if (b[i]) {\n          labelElements.push(React.createElement(\"strong\", {\n            key: i\n          }, b[i]));\n        }\n      }\n      nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n      var active = values.some(function (value) {\n        if (cascade) {\n          return nodes.some(function (node) {\n            return node[valueKey] === value;\n          });\n        }\n        return item[valueKey] === value;\n      });\n      var disabled = disabledItemValues.some(function (value) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      });\n      var itemClasses = classNames(_this.addPrefix('cascader-row'), (_classNames = {}, _classNames[_this.addPrefix('cascader-row-disabled')] = disabled, _classNames));\n      return React.createElement(\"div\", {\n        key: key,\n        className: itemClasses\n      }, React.createElement(Checkbox, {\n        disabled: disabled,\n        checked: active,\n        value: item,\n        indeterminate: cascade && !active && MultiCascader.utils.isSomeChildChecked(item, values),\n        onChange: _this.handleChangeForSearchItem\n      }, React.createElement(\"span\", {\n        className: _this.addPrefix('cascader-cols')\n      }, nodes.map(function (node, index) {\n        return React.createElement(\"span\", {\n          key: \"col-\" + index,\n          className: _this.addPrefix('cascader-col')\n        }, node[labelKey]);\n      }))));\n    };\n    var _data = props.data,\n      _value = props.value,\n      defaultValue = props.defaultValue;\n    var initState = {\n      data: _data,\n      searchKeyword: '',\n      prevValue: _value,\n      value: defaultValue || [],\n      selectNode: null,\n      /**\n       * 选中值的路径\n       */\n      activePaths: []\n    };\n    MultiCascader.utils = createUtils(props);\n    var flattenData = flattenTree(_data, props.childrenKey);\n    _this.isControlled = !_isUndefined(_value);\n    _this.state = _extends({}, initState, {\n      flattenData: flattenData,\n      /**\n       * 用于展示面板的数据列表，是一个二维的数组\n       * 是通过 data 树结构转换成的二维的数组，其中只包含页面上展示的数据\n       */\n      items: [flattenData.filter(function (item) {\n        return !item.parent;\n      })]\n    }, MultiCascader.getCascadeState(props, flattenData)); // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    return _this;\n  }\n  MultiCascader.getCascadeState = function getCascadeState(nextProps, flattenData, nextValue) {\n    var data = nextProps.data,\n      cascade = nextProps.cascade,\n      value = nextProps.value,\n      defaultValue = nextProps.defaultValue,\n      uncheckableItemValues = nextProps.uncheckableItemValues;\n    var cascadeValue = nextValue || value || defaultValue || [];\n    if (cascade && data) {\n      cascadeValue = MultiCascader.utils.transformValue(cascadeValue, flattenData, uncheckableItemValues);\n    }\n    return {\n      value: cascadeValue\n    };\n  };\n  MultiCascader.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var data = nextProps.data,\n      valueKey = nextProps.valueKey,\n      childrenKey = nextProps.childrenKey;\n    var value = nextProps.value || prevState.value || [];\n    var prevValue = prevState.prevValue,\n      _prevState$selectNode = prevState.selectNode,\n      selectNode = _prevState$selectNode === void 0 ? {} : _prevState$selectNode,\n      items = prevState.items;\n    var flattenData = prevState.flattenData;\n    var isChangedData = data !== prevState.data;\n    var isChangedValue = !shallowEqualArray(prevValue, nextProps.value);\n    if (isChangedData || isChangedValue) {\n      if (isChangedData) {\n        flattenData = flattenTree(data, nextProps.childrenKey);\n      }\n      /**\n       * 如果更新了 data,\n       * 首先获取到被点击节点的值 `selectNode`， 然后再拿到新增后的 `newChildren`,\n       */\n\n      var nextSelectNode = flattenData.find(function (n) {\n        return selectNode && n[valueKey] === selectNode[valueKey];\n      });\n      var newChildren = (_get(nextSelectNode, childrenKey) || []).map(function (item) {\n        item.parent = nextSelectNode;\n        return item;\n      });\n      if (newChildren.length && items) {\n        items[items.length - 1] = newChildren;\n      }\n      var nextState = _extends({\n        selectNode: nextSelectNode,\n        flattenData: flattenData,\n        data: data,\n        items: MultiCascader.utils.getItems(nextSelectNode, flattenData)\n      }, MultiCascader.getCascadeState(nextProps, flattenData, value));\n      if (isChangedValue) {\n        nextState.prevValue = nextProps.value;\n      }\n      return nextState;\n    }\n    return null;\n  };\n  var _proto = MultiCascader.prototype;\n  _proto.getValue = function getValue() {\n    return this.state.value || [];\n  };\n  _proto.getSearchResult = function getSearchResult() {\n    var _this$props8 = this.props,\n      labelKey = _this$props8.labelKey,\n      valueKey = _this$props8.valueKey,\n      _this$props8$unchecka = _this$props8.uncheckableItemValues,\n      uncheckableItemValues = _this$props8$unchecka === void 0 ? [] : _this$props8$unchecka;\n    var _this$state = this.state,\n      searchKeyword = _this$state.searchKeyword,\n      flattenData = _this$state.flattenData;\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n      return false;\n    });\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n      if (i === 99) {\n        return items;\n      }\n    }\n    return items;\n  };\n  _proto.renderSearchResultPanel = function renderSearchResultPanel() {\n    var locale = this.props.locale;\n    var searchKeyword = this.state.searchKeyword;\n    if (searchKeyword === '') {\n      return null;\n    }\n    var items = this.getSearchResult();\n    return React.createElement(\"div\", {\n      className: this.addPrefix('cascader-search-panel')\n    }, items.length ? items.map(this.renderSearchRow) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText));\n  };\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames2;\n    var _this$state2 = this.state,\n      items = _this$state2.items,\n      activePaths = _this$state2.activePaths,\n      searchKeyword = _this$state2.searchKeyword;\n    var _this$props9 = this.props,\n      renderMenu = _this$props9.renderMenu,\n      renderExtraFooter = _this$props9.renderExtraFooter,\n      menuClassName = _this$props9.menuClassName,\n      menuStyle = _this$props9.menuStyle,\n      classPrefix = _this$props9.classPrefix,\n      searchable = _this$props9.searchable,\n      locale = _this$props9.locale,\n      inline = _this$props9.inline;\n    var classes = classNames(this.addPrefix('cascader-menu'), this.addPrefix('multi-cascader-menu'), menuClassName, (_classNames2 = {}, _classNames2[this.addPrefix('inline')] = inline, _classNames2));\n    var menuProps = _pick(this.props, Object.keys(dropdownMenuPropTypes));\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      style: menuStyle,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: searchKeyword\n    }), this.renderSearchResultPanel(), searchKeyword === '' && React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: classPrefix,\n      ref: this.menuContainerRef,\n      cascadeItems: items,\n      cascadePathItems: activePaths,\n      value: this.getValue(),\n      onSelect: this.handleSelect,\n      onCheck: this.handleCheck,\n      renderMenu: renderMenu\n    })), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  _proto.render = function render() {\n    var _this$props$value;\n    var _this$props10 = this.props,\n      valueKey = _this$props10.valueKey,\n      labelKey = _this$props10.labelKey,\n      childrenKey = _this$props10.childrenKey,\n      placeholder = _this$props10.placeholder,\n      renderValue = _this$props10.renderValue,\n      disabled = _this$props10.disabled,\n      cleanable = _this$props10.cleanable,\n      locale = _this$props10.locale,\n      toggleComponentClass = _this$props10.toggleComponentClass,\n      style = _this$props10.style,\n      onEnter = _this$props10.onEnter,\n      onExited = _this$props10.onExited,\n      onClean = _this$props10.onClean,\n      countable = _this$props10.countable,\n      cascade = _this$props10.cascade,\n      inline = _this$props10.inline,\n      positionRef = _this$props10.positionRef,\n      rest = _objectWithoutPropertiesLoose(_this$props10, [\"valueKey\", \"labelKey\", \"childrenKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onExited\", \"onClean\", \"countable\", \"cascade\", \"inline\", \"positionRef\"]);\n    if (inline) {\n      return this.renderDropdownMenu();\n    }\n    var flattenData = this.state.flattenData;\n    var unhandled = getUnhandledProps(MultiCascader, rest);\n    var value = this.getValue();\n    var selectedItems = flattenData.filter(function (item) {\n      return value.some(function (v) {\n        return v === item[valueKey];\n      });\n    }) || [];\n    /**\n     * 1.Have a value and the value is valid.\n     * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n     */\n\n    var hasValue = selectedItems.length > 0 || ((_this$props$value = this.props.value) === null || _this$props$value === void 0 ? void 0 : _this$props$value.length) > 0 && _isFunction(renderValue);\n    var selectedElement = placeholder;\n    if (selectedItems.length > 0) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        childrenKey: childrenKey,\n        prefix: this.addPrefix,\n        cascade: cascade,\n        locale: locale\n      });\n    }\n    if (hasValue && _isFunction(renderValue)) {\n      selectedElement = renderValue((value === null || value === void 0 ? void 0 : value.length) > 0 ? value : this.props.value, selectedItems, selectedElement);\n      if (_isNil(selectedElement)) {\n        hasValue = false;\n      }\n    }\n    var classes = getToggleWrapperClassName('cascader', this.addPrefix, this.props, hasValue);\n    return React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      tabIndex: -1,\n      role: \"menu\"\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEnter: createChainedFunction(this.handleEntered, onEnter),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n  return MultiCascader;\n}(React.Component);\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nMultiCascader.defaultProps = _extends({}, listPickerDefaultProps, {\n  searchable: true,\n  countable: true,\n  cascade: true,\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    checkAll: 'All',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  }\n});\nMultiCascader.utils = {};\npolyfill(MultiCascader);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(MultiCascader);","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNil","_isFunction","_pick","_get","_isUndefined","React","PropTypes","classNames","shallowEqualArray","polyfill","DropdownMenu","dropdownMenuPropTypes","Checkbox","createUtils","flattenTree","getNodeParents","defaultProps","prefix","getUnhandledProps","createChainedFunction","mergeRefs","getSafeRegExpString","PickerToggle","MenuWrapper","SearchBar","SelectedElement","PickerToggleTrigger","getToggleWrapperClassName","createConcatChildrenFunction","listPickerPropTypes","listPickerDefaultProps","MultiCascader","_React$Component","props","_this","call","isControlled","menuContainerRef","positionRef","triggerRef","toggleRef","handleCheck","item","event","checked","_this$props","valueKey","cascade","uncheckableItemValues","onChange","onCheck","itemValue","value","utils","splitValue","getValue","push","filter","n","setState","handleChangeForSearchItem","handleSelect","node","cascadeItems","activePaths","_this$props2","onSelect","childrenKey","selectNode","items","_this$positionRef$cur","_this$positionRef$cur2","current","updatePosition","handleSearch","searchKeyword","_this$props$onSearch","_this$props3","onSearch","handleCloseDropdown","_this$triggerRef$curr","_this$triggerRef$curr2","hide","handleOpenDropdown","_this$triggerRef$curr3","_this$triggerRef$curr4","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","handleClean","_this$props4","disabled","data","nextState","handleEntered","_this$props$onOpen","_this$props5","onOpen","active","handleExit","_this$props$onClose","_this$props6","onClose","addPrefix","name","classPrefix","getPositionInstance","getToggleInstance","renderSearchRow","key","_extends2","_classNames","_this$props7","labelKey","_this$props7$disabled","disabledItemValues","state","values","nodes","regx","RegExp","labelElements","a","split","b","match","i","length","createElement","some","itemClasses","className","indeterminate","isSomeChildChecked","map","index","_data","_value","defaultValue","initState","prevValue","flattenData","parent","getCascadeState","createRef","nextProps","nextValue","cascadeValue","transformValue","getDerivedStateFromProps","prevState","_prevState$selectNode","isChangedData","isChangedValue","nextSelectNode","find","newChildren","getItems","_proto","prototype","getSearchResult","_this$props8","_this$props8$unchecka","_this$state","result","renderSearchResultPanel","locale","noResultsText","renderDropdownMenu","_classNames2","_this$state2","_this$props9","renderMenu","renderExtraFooter","menuClassName","menuStyle","searchable","inline","classes","menuProps","Object","keys","style","placeholder","searchPlaceholder","ref","cascadePathItems","render","_this$props$value","_this$props10","renderValue","cleanable","toggleComponentClass","onEnter","onExited","onClean","countable","rest","unhandled","selectedItems","v","hasValue","selectedElement","tabIndex","role","pickerProps","speaker","componentClass","Component","propTypes","bool","menuWidth","number","menuHeight","oneOfType","string","array","renderMenuItem","func","checkAll"],"sources":["/Users/azminds/Documents/five-g/frontend/node_modules/rsuite/es/MultiCascader/MultiCascader.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _get from \"lodash/get\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqualArray from '../utils/shallowEqualArray';\nimport { polyfill } from 'react-lifecycles-compat';\nimport DropdownMenu, { dropdownMenuPropTypes } from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport createUtils from './utils';\nimport { flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport getSafeRegExpString from '../utils/getSafeRegExpString';\nimport { PickerToggle, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, getToggleWrapperClassName, createConcatChildrenFunction } from '../Picker';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes';\n\nvar MultiCascader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(MultiCascader, _React$Component);\n\n  function MultiCascader(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.isControlled = null;\n    _this.menuContainerRef = void 0;\n    _this.positionRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.handleCheck = function (item, event, checked) {\n      var _this$props = _this.props,\n          valueKey = _this$props.valueKey,\n          cascade = _this$props.cascade,\n          uncheckableItemValues = _this$props.uncheckableItemValues,\n          onChange = _this$props.onChange,\n          onCheck = _this$props.onCheck;\n      var itemValue = item[valueKey];\n      var value = [];\n\n      if (cascade) {\n        value = MultiCascader.utils.splitValue(item, checked, _this.getValue(), uncheckableItemValues).value;\n      } else {\n        value = _this.getValue();\n\n        if (checked) {\n          value.push(itemValue);\n        } else {\n          value = value.filter(function (n) {\n            return n !== itemValue;\n          });\n        }\n      }\n\n      if (!_this.isControlled) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n      onCheck === null || onCheck === void 0 ? void 0 : onCheck(value, item, checked, event);\n    };\n\n    _this.handleChangeForSearchItem = function (value, checked, event) {\n      _this.handleCheck(value, event, checked);\n    };\n\n    _this.handleSelect = function (node, cascadeItems, activePaths, event) {\n      var _this$props2 = _this.props,\n          onSelect = _this$props2.onSelect,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey;\n\n      _this.setState({\n        selectNode: node,\n        items: cascadeItems,\n        activePaths: activePaths\n      }, function () {\n        var _this$positionRef$cur, _this$positionRef$cur2;\n\n        (_this$positionRef$cur = _this.positionRef.current) === null || _this$positionRef$cur === void 0 ? void 0 : (_this$positionRef$cur2 = _this$positionRef$cur.updatePosition) === null || _this$positionRef$cur2 === void 0 ? void 0 : _this$positionRef$cur2.call(_this$positionRef$cur);\n      });\n\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, activePaths, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }), event);\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props$onSearch, _this$props3;\n\n      _this.setState({\n        searchKeyword: searchKeyword\n      });\n\n      (_this$props$onSearch = (_this$props3 = _this.props).onSearch) === null || _this$props$onSearch === void 0 ? void 0 : _this$props$onSearch.call(_this$props3, searchKeyword, event);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props4 = _this.props,\n          disabled = _this$props4.disabled,\n          onChange = _this$props4.onChange,\n          data = _this$props4.data;\n\n      if (disabled) {\n        return;\n      }\n\n      var nextState = {\n        items: [data],\n        selectNode: null,\n        activePaths: []\n      };\n\n      if (!_this.isControlled) {\n        nextState.value = [];\n      }\n\n      _this.setState(nextState);\n\n      onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props5;\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props6;\n\n      (_this$props$onClose = (_this$props6 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props6);\n\n      _this.setState({\n        searchKeyword: '',\n        active: false\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.renderSearchRow = function (item, key) {\n      var _extends2, _classNames;\n\n      var _this$props7 = _this.props,\n          labelKey = _this$props7.labelKey,\n          valueKey = _this$props7.valueKey,\n          cascade = _this$props7.cascade,\n          _this$props7$disabled = _this$props7.disabledItemValues,\n          disabledItemValues = _this$props7$disabled === void 0 ? [] : _this$props7$disabled;\n      var searchKeyword = _this.state.searchKeyword;\n\n      var values = _this.getValue();\n\n      var nodes = getNodeParents(item);\n      var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n      var labelElements = [];\n      var a = item[labelKey].split(regx);\n      var b = item[labelKey].match(regx);\n\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n\n        if (b[i]) {\n          labelElements.push(React.createElement(\"strong\", {\n            key: i\n          }, b[i]));\n        }\n      }\n\n      nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n      var active = values.some(function (value) {\n        if (cascade) {\n          return nodes.some(function (node) {\n            return node[valueKey] === value;\n          });\n        }\n\n        return item[valueKey] === value;\n      });\n      var disabled = disabledItemValues.some(function (value) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      });\n      var itemClasses = classNames(_this.addPrefix('cascader-row'), (_classNames = {}, _classNames[_this.addPrefix('cascader-row-disabled')] = disabled, _classNames));\n      return React.createElement(\"div\", {\n        key: key,\n        className: itemClasses\n      }, React.createElement(Checkbox, {\n        disabled: disabled,\n        checked: active,\n        value: item,\n        indeterminate: cascade && !active && MultiCascader.utils.isSomeChildChecked(item, values),\n        onChange: _this.handleChangeForSearchItem\n      }, React.createElement(\"span\", {\n        className: _this.addPrefix('cascader-cols')\n      }, nodes.map(function (node, index) {\n        return React.createElement(\"span\", {\n          key: \"col-\" + index,\n          className: _this.addPrefix('cascader-col')\n        }, node[labelKey]);\n      }))));\n    };\n\n    var _data = props.data,\n        _value = props.value,\n        defaultValue = props.defaultValue;\n    var initState = {\n      data: _data,\n      searchKeyword: '',\n      prevValue: _value,\n      value: defaultValue || [],\n      selectNode: null,\n\n      /**\n       * 选中值的路径\n       */\n      activePaths: []\n    };\n    MultiCascader.utils = createUtils(props);\n    var flattenData = flattenTree(_data, props.childrenKey);\n    _this.isControlled = !_isUndefined(_value);\n    _this.state = _extends({}, initState, {\n      flattenData: flattenData,\n\n      /**\n       * 用于展示面板的数据列表，是一个二维的数组\n       * 是通过 data 树结构转换成的二维的数组，其中只包含页面上展示的数据\n       */\n      items: [flattenData.filter(function (item) {\n        return !item.parent;\n      })]\n    }, MultiCascader.getCascadeState(props, flattenData)); // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    return _this;\n  }\n\n  MultiCascader.getCascadeState = function getCascadeState(nextProps, flattenData, nextValue) {\n    var data = nextProps.data,\n        cascade = nextProps.cascade,\n        value = nextProps.value,\n        defaultValue = nextProps.defaultValue,\n        uncheckableItemValues = nextProps.uncheckableItemValues;\n    var cascadeValue = nextValue || value || defaultValue || [];\n\n    if (cascade && data) {\n      cascadeValue = MultiCascader.utils.transformValue(cascadeValue, flattenData, uncheckableItemValues);\n    }\n\n    return {\n      value: cascadeValue\n    };\n  };\n\n  MultiCascader.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var data = nextProps.data,\n        valueKey = nextProps.valueKey,\n        childrenKey = nextProps.childrenKey;\n    var value = nextProps.value || prevState.value || [];\n    var prevValue = prevState.prevValue,\n        _prevState$selectNode = prevState.selectNode,\n        selectNode = _prevState$selectNode === void 0 ? {} : _prevState$selectNode,\n        items = prevState.items;\n    var flattenData = prevState.flattenData;\n    var isChangedData = data !== prevState.data;\n    var isChangedValue = !shallowEqualArray(prevValue, nextProps.value);\n\n    if (isChangedData || isChangedValue) {\n      if (isChangedData) {\n        flattenData = flattenTree(data, nextProps.childrenKey);\n      }\n      /**\n       * 如果更新了 data,\n       * 首先获取到被点击节点的值 `selectNode`， 然后再拿到新增后的 `newChildren`,\n       */\n\n\n      var nextSelectNode = flattenData.find(function (n) {\n        return selectNode && n[valueKey] === selectNode[valueKey];\n      });\n      var newChildren = (_get(nextSelectNode, childrenKey) || []).map(function (item) {\n        item.parent = nextSelectNode;\n        return item;\n      });\n\n      if (newChildren.length && items) {\n        items[items.length - 1] = newChildren;\n      }\n\n      var nextState = _extends({\n        selectNode: nextSelectNode,\n        flattenData: flattenData,\n        data: data,\n        items: MultiCascader.utils.getItems(nextSelectNode, flattenData)\n      }, MultiCascader.getCascadeState(nextProps, flattenData, value));\n\n      if (isChangedValue) {\n        nextState.prevValue = nextProps.value;\n      }\n\n      return nextState;\n    }\n\n    return null;\n  };\n\n  var _proto = MultiCascader.prototype;\n\n  _proto.getValue = function getValue() {\n    return this.state.value || [];\n  };\n\n  _proto.getSearchResult = function getSearchResult() {\n    var _this$props8 = this.props,\n        labelKey = _this$props8.labelKey,\n        valueKey = _this$props8.valueKey,\n        _this$props8$unchecka = _this$props8.uncheckableItemValues,\n        uncheckableItemValues = _this$props8$unchecka === void 0 ? [] : _this$props8$unchecka;\n    var _this$state = this.state,\n        searchKeyword = _this$state.searchKeyword,\n        flattenData = _this$state.flattenData;\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n\n      return false;\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  };\n\n  _proto.renderSearchResultPanel = function renderSearchResultPanel() {\n    var locale = this.props.locale;\n    var searchKeyword = this.state.searchKeyword;\n\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = this.getSearchResult();\n    return React.createElement(\"div\", {\n      className: this.addPrefix('cascader-search-panel')\n    }, items.length ? items.map(this.renderSearchRow) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText));\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames2;\n\n    var _this$state2 = this.state,\n        items = _this$state2.items,\n        activePaths = _this$state2.activePaths,\n        searchKeyword = _this$state2.searchKeyword;\n    var _this$props9 = this.props,\n        renderMenu = _this$props9.renderMenu,\n        renderExtraFooter = _this$props9.renderExtraFooter,\n        menuClassName = _this$props9.menuClassName,\n        menuStyle = _this$props9.menuStyle,\n        classPrefix = _this$props9.classPrefix,\n        searchable = _this$props9.searchable,\n        locale = _this$props9.locale,\n        inline = _this$props9.inline;\n    var classes = classNames(this.addPrefix('cascader-menu'), this.addPrefix('multi-cascader-menu'), menuClassName, (_classNames2 = {}, _classNames2[this.addPrefix('inline')] = inline, _classNames2));\n\n    var menuProps = _pick(this.props, Object.keys(dropdownMenuPropTypes));\n\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      style: menuStyle,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: searchKeyword\n    }), this.renderSearchResultPanel(), searchKeyword === '' && React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: classPrefix,\n      ref: this.menuContainerRef,\n      cascadeItems: items,\n      cascadePathItems: activePaths,\n      value: this.getValue(),\n      onSelect: this.handleSelect,\n      onCheck: this.handleCheck,\n      renderMenu: renderMenu\n    })), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.render = function render() {\n    var _this$props$value;\n\n    var _this$props10 = this.props,\n        valueKey = _this$props10.valueKey,\n        labelKey = _this$props10.labelKey,\n        childrenKey = _this$props10.childrenKey,\n        placeholder = _this$props10.placeholder,\n        renderValue = _this$props10.renderValue,\n        disabled = _this$props10.disabled,\n        cleanable = _this$props10.cleanable,\n        locale = _this$props10.locale,\n        toggleComponentClass = _this$props10.toggleComponentClass,\n        style = _this$props10.style,\n        onEnter = _this$props10.onEnter,\n        onExited = _this$props10.onExited,\n        onClean = _this$props10.onClean,\n        countable = _this$props10.countable,\n        cascade = _this$props10.cascade,\n        inline = _this$props10.inline,\n        positionRef = _this$props10.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props10, [\"valueKey\", \"labelKey\", \"childrenKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onExited\", \"onClean\", \"countable\", \"cascade\", \"inline\", \"positionRef\"]);\n\n    if (inline) {\n      return this.renderDropdownMenu();\n    }\n\n    var flattenData = this.state.flattenData;\n    var unhandled = getUnhandledProps(MultiCascader, rest);\n    var value = this.getValue();\n    var selectedItems = flattenData.filter(function (item) {\n      return value.some(function (v) {\n        return v === item[valueKey];\n      });\n    }) || [];\n    /**\n     * 1.Have a value and the value is valid.\n     * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n     */\n\n    var hasValue = selectedItems.length > 0 || ((_this$props$value = this.props.value) === null || _this$props$value === void 0 ? void 0 : _this$props$value.length) > 0 && _isFunction(renderValue);\n\n    var selectedElement = placeholder;\n\n    if (selectedItems.length > 0) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        childrenKey: childrenKey,\n        prefix: this.addPrefix,\n        cascade: cascade,\n        locale: locale\n      });\n    }\n\n    if (hasValue && _isFunction(renderValue)) {\n      selectedElement = renderValue((value === null || value === void 0 ? void 0 : value.length) > 0 ? value : this.props.value, selectedItems, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValue = false;\n      }\n    }\n\n    var classes = getToggleWrapperClassName('cascader', this.addPrefix, this.props, hasValue);\n    return React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      tabIndex: -1,\n      role: \"menu\"\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEnter: createChainedFunction(this.handleEntered, onEnter),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return MultiCascader;\n}(React.Component);\n\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nMultiCascader.defaultProps = _extends({}, listPickerDefaultProps, {\n  searchable: true,\n  countable: true,\n  cascade: true,\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    checkAll: 'All',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  }\n});\nMultiCascader.utils = {};\npolyfill(MultiCascader);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(MultiCascader);"],"mappings":"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"},"metadata":{},"sourceType":"module"}