{"ast":null,"code":"(function (global, factory) {\n  if ('function' == typeof define && define.amd) define(['exports', 'react', 'prop-types', './styled-elements'], factory);else if ('undefined' != typeof exports) factory(exports, require('react'), require('prop-types'), require('./styled-elements'));else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.React, global.propTypes, global.styledElements), global.index = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _styledElements) {\n  'use strict';\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) throw new TypeError('Cannot call a class as a function');\n  }\n  function _possibleConstructorReturn(self, call) {\n    if (!self) throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n    return call && ('object' == typeof call || 'function' == typeof call) ? call : self;\n  }\n  function _inherits(subClass, superClass) {\n    if ('function' != typeof superClass && null !== superClass) throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), superClass && (Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass);\n  }\n  function last(arr) {\n    var pre = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : '',\n      base = 2 < arr.length ? '' + arr[arr.length - 2] : '';\n    return 0 !== base.indexOf(pre + '> ') && (base = 'bash'), base.replace(pre + '> ', '').split(' ')[0];\n  }\n  Object.defineProperty(exports, '__esModule', {\n    value: !0\n  });\n  var _class,\n    _temp2,\n    _react2 = _interopRequireDefault(_react),\n    _propTypes2 = _interopRequireDefault(_propTypes),\n    _extends = Object.assign || function (target) {\n      for (var source, i = 1; i < arguments.length; i++) for (var key in source = arguments[i], source) Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);\n      return target;\n    },\n    _createClass = function () {\n      function defineProperties(target, props) {\n        for (var descriptor, i = 0; i < props.length; i++) descriptor = props[i], descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, 'value' in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor);\n      }\n      return function (Constructor, protoProps, staticProps) {\n        return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor;\n      };\n    }(),\n    Tabs = (_temp2 = _class = function (_Component) {\n      function Tabs() {\n        var _ref, _temp, _this, _ret;\n        _classCallCheck(this, Tabs);\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n          showingPlus: !1\n        }, _this.handleBarClick = function (e) {\n          e.stopPropagation(), _this.props.createTab();\n        }, _this.handleTabClick = function (e, index) {\n          e.preventDefault(), e.stopPropagation(), _this.props.setActiveTab(index);\n        }, _this.handleRemoveClick = function (e, index, instance) {\n          return e.preventDefault(), e.stopPropagation(), _this.props.removeTab(index, instance.props.id), !1;\n        }, _this.removePlus = function () {\n          _this.state.showingPlus && _this.setState({\n            showingPlus: !1\n          });\n        }, _this.showPlus = function () {\n          _this.state.showingPlus || _this.setState({\n            showingPlus: !0\n          });\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n      }\n      return _inherits(Tabs, _Component), _createClass(Tabs, [{\n        key: 'render',\n        value: function () {\n          var _this2 = this,\n            showingPlus = this.state.showingPlus,\n            _props = this.props,\n            style = _props.style,\n            active = _props.active,\n            tabs = this.context.instances.map(function (_ref2) {\n              var index = _ref2.index,\n                instance = _ref2.instance,\n                title = instance && instance.state ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n              return _react2.default.createElement(_styledElements.Tab, {\n                key: index,\n                active: active === index,\n                onClick: function (e) {\n                  return _this2.handleTabClick(e, index);\n                },\n                onFocus: function (e) {\n                  return _this2.handleTabClick(e, index);\n                },\n                title: title,\n                tabIndex: 0\n              }, 1 < _this2.context.instances.length && _react2.default.createElement(_styledElements.TabClose, {\n                title: 'Close Tab',\n                onMouseDown: function (e) {\n                  return _this2.handleRemoveClick(e, index, instance);\n                }\n              }, 'x'), title);\n            });\n          return _react2.default.createElement(_styledElements.TabBar, {\n            style: _extends({}, style, this.context.maximise ? {\n              maxWidth: '100%'\n            } : {})\n          }, tabs, _react2.default.createElement(_styledElements.TabBarEmpty, {\n            onMouseEnter: this.showPlus,\n            onMouseLeave: this.removePlus\n          }, _react2.default.createElement(_styledElements.TabPlus, {\n            visible: showingPlus,\n            onClick: this.handleBarClick\n          }, '+')));\n        }\n      }]), Tabs;\n    }(_react.Component), _class.displayName = 'Tabs', _class.propTypes = {\n      style: _propTypes2.default.object,\n      active: _propTypes2.default.string,\n      setActiveTab: _propTypes2.default.func,\n      removeTab: _propTypes2.default.func,\n      createTab: _propTypes2.default.func\n    }, _class.defaultProps = {\n      style: {}\n    }, _class.contextTypes = {\n      instances: _propTypes2.default.array,\n      maximise: _propTypes2.default.bool\n    }, _temp2);\n  exports.default = Tabs;\n});","map":{"version":3,"mappings":"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","names":["last","arr","pre","base","length","indexOf","replace","split","Tabs","state","showingPlus","handleBarClick","e","stopPropagation","_this","props","createTab","handleTabClick","index","preventDefault","setActiveTab","handleRemoveClick","instance","removeTab","id","removePlus","setState","showPlus","_props","style","active","tabs","context","instances","map","title","summary","promptPrefix","_react2","key","onClick","_this2","onFocus","tabIndex","onMouseDown","maximise","maxWidth","onMouseEnter","onMouseLeave","visible","displayName","propTypes","_propTypes2","object","string","func","defaultProps","contextTypes","array","bool"],"sources":["../../../../src/js/components/Tabs/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tab, TabBar, TabBarEmpty, TabClose, TabPlus } from './styled-elements';\n\nfunction last(arr, pre = '') {\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\n  if (base.indexOf(`${pre}> `) !== 0) {\n    base = 'bash';\n  }\n  return base.replace(`${pre}> `, '').split(' ')[0];\n}\n\nclass Tabs extends Component {\n  static displayName = 'Tabs';\n\n  static propTypes = {\n    style: PropTypes.object, // eslint-disable-line\n    active: PropTypes.string,\n    setActiveTab: PropTypes.func,\n    removeTab: PropTypes.func,\n    createTab: PropTypes.func,\n  };\n\n  static defaultProps = {\n    style: {},\n  };\n\n  static contextTypes = {\n    instances: PropTypes.array,\n    maximise: PropTypes.bool,\n  };\n\n  state = {\n    showingPlus: false,\n  };\n\n  handleBarClick = (e) => {\n    e.stopPropagation();\n    this.props.createTab();\n  };\n\n  // handle clicking a tab\n  handleTabClick = (e, index) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.setActiveTab(index);\n  };\n\n  // handle remove clicked\n  handleRemoveClick = (e, index, instance) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.removeTab(index, instance.props.id);\n    return false;\n  };\n\n  removePlus = () => {\n    if (this.state.showingPlus) {\n      this.setState({ showingPlus: false });\n    }\n  }\n\n  showPlus = () => {\n    if (!this.state.showingPlus) {\n      this.setState({ showingPlus: true });\n    }\n  }\n\n  render() {\n    const { showingPlus } = this.state;\n    const { style, active } = this.props;\n    const tabs = this.context.instances.map(({ index, instance }) => {\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n      return (\n        <Tab\n          key={index}\n          active={active === index}\n          onClick={e => this.handleTabClick(e, index)}\n          onFocus={e => this.handleTabClick(e, index)}\n          title={title}\n          tabIndex={0}\n        >\n          {this.context.instances.length > 1 && (\n            <TabClose\n              title=\"Close Tab\"\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\n            >\n              x\n            </TabClose>\n          )}\n          {title}\n        </Tab>\n      );\n    });\n\n    return (\n      <TabBar\n        style={{\n          ...style,\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\n        }}\n      >\n        {tabs}\n        <TabBarEmpty\n          onMouseEnter={this.showPlus}\n          onMouseLeave={this.removePlus}\n        >\n          <TabPlus\n            visible={showingPlus}\n            onClick={this.handleBarClick}\n          >+\n          </TabPlus>\n        </TabBarEmpty>\n      </TabBar>\n    );\n  }\n}\n\nexport default Tabs;\n"]},"metadata":{},"sourceType":"script"}